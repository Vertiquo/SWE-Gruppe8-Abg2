<!--
    Copyright (C) 2015 - present Juergen Zimmermann, Hochschule Karlsruhe

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->

<!-- Inline form https://getbootstrap.com/docs/5.1/forms/layout/#inline-forms -->
<!-- prettier-ignore -->

<form
  autocomplete="off"
  role="form"
  (submit)="onLogout()"
  *ngIf="(isLoggedIn$ | async) || init; else login"
>
  <div class="box">
    <button mat-raised-button color="accent" type="submit">Logout</button>
  </div>
</form>

<ng-template #login>
  <form autocomplete="off" role="form" (submit)="onLogin()">
    <div class="login-buttons">
      <mat-form-field class="logbut" appearance="fill">
        <mat-label>Benutzername</mat-label>
        <input
          matInput
          required
          placeholder="Mein Nutzername"
          [(ngModel)]="username"
          name="username"
        />
      </mat-form-field>

      <mat-form-field class="logbut" appearance="fill">
        <mat-label>Passwort</mat-label>
        <input
          matInput
          [type]="hide ? 'password' : 'text'"
          [(ngModel)]="password"
          required
          name="password"
        />

        <button
          mat-icon-button
          matSuffix
          class="logbut"
          (click)="hide = !hide"
          [attr.aria-label]="'Passwort verstecken'"
          [attr.aria-pressed]="hide"
        >
          <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
        </button>
      </mat-form-field>

      <button mat-raised-button color="accent" type="submit">Login</button>
    </div>
  </form>
</ng-template>
